---
title: Filter
---
# Hello Filter
## Filter概念
Filter就像一个一个哨卡，用户的请求需要经过Filter
并且可以有多个过滤器
![](https://stepimagewm.how2j.cn/1719.png)

## 编写一个简单的FirstFilter
开发一个简单的FirstFilter，用来打印用户访问ip地址和访问的页面
>FirstFilter.java  
## 配置web.xml
在web.xml中进行filter的配置，和servlet的配置很类似
```
<url-pattern>/*</url-pattern>//表示所有的访问都会过滤
```

如果配置成
```
<url-pattern>*.jsp</url-pattern>//就表示只过滤jsp
```
>web.xml

## init() 方法
与Servlet需要配置自启动才会随着tomcat的启动而执行init()方法不一样。

Filter**一定**会随着tomcat的启动自启动。

# 使用FILTER进行中文问题处理
## 使用Servlet处理的局限性
在通过Servlet获取中文参数 的章节中知道，可以通过
```
request.setCharacterEncoding("UTF-8");
```
正确获取UTF-8编码的中文，但是如果有很多servlet都需要获取中文，那么就必须在每个Servlet中增加这段代码。

有一个简便的办法，那就是通过Filter过滤器进行中文处理 ，那么所有的Servlet都不需要单独处理了。

## 使用Filter处理
创建一个 EncodingFilter ，设置如下代码

```
HttpServletRequest request = (HttpServletRequest) req;
request.setCharacterEncoding("UTF-8");
```

doFilter方法的第一个参数req,是ServletRequest 类型的，不支持setCharacterEncoding，所以要先强制转换为HttpServletRequest

# 使用FILTER进行登陆验证功能的开发
## 在Servlet中进行登陆验证的局限性
在用户是否登陆的验证中，我们可以通过在HeroListServlet中增加对session的判断代码来做到登陆验证。

但是按照这样的做法，所有的Servlet都要加上一样的代码，就会显得比较累赘。

与通过Filter处理中文问题一样，也可以通过Filter一次性解决所有的登陆验证问题

## 使用Filter处理用户登录
>AuthFFilter.java
